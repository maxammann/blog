<div class="gallery caption-position-{{ with .Get "caption-position" | default "bottom" }}{{.}}{{end}} caption-effect-{{ with .Get "caption-effect" | default "slide" }}{{.}}{{end}} hover-effect-{{ with .Get "hover-effect" | default "zoom" }}{{.}}{{end}} {{ if ne (.Get "hover-transition") "none" }}hover-transition{{end}}"
	itemscope itemtype="http://schema.org/ImageGallery">

	{{ range .Page.Resources.ByType "image" }}
	{{ $image := . }}

	<div class="box">
		<div itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
			<div class="img" style="background-image: url('{{ $image.RelPermalink }}');">
				<img itemprop="thumbnail" src="{{ $image.RelPermalink }}" alt="{{ "caption" }}" />
				<!-- <img> hidden if in .gallery -->
			</div>
			<figcaption>
				<p>{{ "caption" }}</p>
			</figcaption>
			<a href="{{ $image.RelPermalink }}" itemprop="contentUrl"></a><!-- put <a> last so it is stacked on top -->
			{{ $.Inner }}
		</div>
	</div>
	{{ end }}
</div>